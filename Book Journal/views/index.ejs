<%- include('partials/header') %>

<h1>Koleksi Buku Saya</h1>
<p>Ini adalah semua buku yang telah Anda baca dan ulas.</p>
<div class="sort-container" style="margin-bottom: 2rem;">
    <form action="/" method="GET" style="display: flex; align-items: center; gap: 10px;">
        <label for="sort" style="font-weight: 600;">Urutkan Berdasarkan:</label>
        <select name="sort" id="sort" class="form-control" onchange="this.form.submit()" style="width: 200px;">
            <option value="id">Terbaru Ditambahkan</option>
            <option value="rating">Rating Tertinggi</option>
            <option value="date">Tanggal Baca</option>
            <option value="title">Judul (A-Z)</option>
        </select>
    </form>
</div>
<div class="book-grid">
    <% if (locals.books && books.length > 0) { %>
        <% books.forEach(book => { %>
            <div class="book-card">
                <div class="book-card-cover">
                    <img src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-L.jpg" alt="Sampul <%= book.title %>" onerror="this.onerror=null;this.src='https://via.placeholder.com/250x350?text=No+Cover';">
                </div>
                <div class="book-card-content">
                    <h3><%= book.title %></h3>
                    <p>oleh <%= book.author %></p>
                    <p class="rating">Rating: <%= book.rating %> / 10 ‚≠ê</p>
                    <p class="notes"><%= book.notes %></p>
                    <div class="card-actions">
                        <a href="/edit/<%= book.id %>" class="btn btn-secondary">Edit</a>
                        <form action="/delete/<%= book.id %>" method="POST" style="display: inline;">
                            <button type="submit" class="btn btn-danger">Hapus</button>
                        </form>
                    </div>
                </div>
            </div>
        <% }) %>
    <% } else { %>
        <p>Anda belum menambahkan buku apapun. <a href="/add">Mulai tambahkan sekarang!</a></p>
    <% } %>
</div>

<%- include('partials/footer') %>